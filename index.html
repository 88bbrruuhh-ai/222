<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My PagesCMS Website</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 1rem 0;
            margin-bottom: 2rem;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2563eb;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #2563eb;
        }

        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4rem 0;
            text-align: center;
            margin-bottom: 3rem;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .content-section {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .content-section h2 {
            color: #2563eb;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }

        .blog-posts {
            display: grid;
            gap: 1.5rem;
        }

        .blog-post {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 1.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .blog-post:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .blog-post h3 {
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .blog-post .meta {
            color: #6b7280;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .blog-post .excerpt {
            color: #4b5563;
            line-height: 1.5;
        }

        .sidebar {
            display: grid;
            gap: 2rem;
        }

        .widget {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .widget h3 {
            color: #2563eb;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tag {
            background: #e5e7eb;
            color: #374151;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            text-decoration: none;
        }

        .tag:hover {
            background: #d1d5db;
        }

        footer {
            background: #1f2937;
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        .cms-notice {
            background: #dbeafe;
            border: 1px solid #93c5fd;
            border-radius: 8px;
            padding: 1rem;
            margin: 2rem 0;
            text-align: center;
        }

        .cms-notice h3 {
            color: #1e40af;
            margin-bottom: 0.5rem;
        }

        .cms-notice p {
            color: #1e3a8a;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .nav-links {
                gap: 1rem;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo">My Website</div>
                <ul class="nav-links">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#blog">Blog</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>Welcome to My PagesCMS Website</h1>
            <p>A beautiful, simple website powered by PagesCMS for easy content management</p>
        </div>
    </section>

    <div class="cms-notice">
        <div class="container">
            <h3>ðŸŽ‰ PagesCMS Ready!</h3>
            <p>This website is configured with PagesCMS. You can edit content directly through GitHub or deploy PagesCMS to manage your content with a beautiful interface.</p>
        </div>
    </div>

    <main class="container">
        <div class="main-content">
            <section class="content-section">
                <h2 id="section-title">Latest Blog Posts</h2>
                <div id="content-area"></div>
            </section>

            <aside class="sidebar">
                <div class="widget">
                    <h3>About This Site</h3>
                    <p>This is a sample website built with PagesCMS integration. All content can be easily managed through the PagesCMS interface.</p>
                </div>

                <div class="widget">
                    <h3>Popular Tags</h3>
                    <div class="tags">
                        <a href="#" class="tag">Tech</a>
                        <a href="#" class="tag">Tutorial</a>
                        <a href="#" class="tag">News</a>
                        <a href="#" class="tag">Lifestyle</a>
                    </div>
                </div>

                <div class="widget">
                    <h3>Quick Links</h3>
                    <ul style="list-style: none; line-height: 1.8;">
                        <li><a href="#" style="color: #2563eb; text-decoration: none;">Documentation</a></li>
                        <li><a href="#" style="color: #2563eb; text-decoration: none;">GitHub Repository</a></li>
                        <li><a href="#" style="color: #2563eb; text-decoration: none;">Support</a></li>
                    </ul>
                </div>
            </aside>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 My PagesCMS Website. Powered by PagesCMS.</p>
        </div>
    </footer>
    <script>
      const contentArea = document.getElementById('content-area');
      const sectionTitle = document.getElementById('section-title');

      const EMBEDDED_POSTS_INDEX = [
        {
          slug: 'getting-started-with-pagescms',
          title: 'Getting Started with PagesCMS',
          date: '2024-01-15',
          author: 'Admin',
          excerpt: 'Learn how to set up and configure PagesCMS for your static website. This comprehensive guide covers everything from basic setup to advanced configurations.',
          cover: '/media/blog/pagescms-tutorial.jpg',
          path: 'content/posts/2024-01-15-getting-started-with-pagescms.md',
          tags: ['Tech', 'Tutorial']
        },
        {
          slug: 'building-modern-websites',
          title: 'Building Modern Websites',
          date: '2024-01-12',
          author: 'Admin',
          excerpt: 'Discover the latest trends and best practices in modern web development. From responsive design to performance optimization.',
          cover: '/media/blog/modern-web.jpg',
          path: 'content/posts/2024-01-12-building-modern-websites.md',
          tags: ['Tech', 'News']
        },
        {
          slug: 'content-management-made-easy',
          title: 'Content Management Made Easy',
          date: '2024-01-10',
          author: 'Admin',
          excerpt: 'Explore how PagesCMS simplifies content management for static sites, making it easy for non-technical users to update content.',
          cover: '/media/blog/cms-easy.jpg',
          path: 'content/posts/2024-01-10-content-management-made-easy.md',
          tags: ['Tutorial', 'Lifestyle']
        }
      ];

      let postsIndexCache = null;

      function setActiveNav() {
        const links = document.querySelectorAll('.nav-links a');
        links.forEach(l => l.classList.remove('active'));
        const hash = location.hash || '#home';
        const active = Array.from(links).find(l => l.getAttribute('href') === hash);
        if (active) active.classList.add('active');
      }

      async function loadMarkdown(path) {
        try {
          const res = await fetch(path);
          if (!res.ok) throw new Error('HTTP ' + res.status);
          const text = await res.text();
          return marked.parse(text);
        } catch (e) {
          return `
            <div class="cms-notice" style="margin:0">
              <h3>Unable to load content</h3>
              <p>If you opened this file from your computer (file://), your browser blocks loading local files.</p>
              <p>Run a local server and open http://localhost instead:</p>
              <pre style="text-align:left; overflow:auto; background:#111; color:#eee; padding:12px; border-radius:6px;"># Python 3\npython -m http.server 5500\n\n# or Node.js\nnpx serve .</pre>
            </div>`;
        }
      }

      async function loadPostsIndex() {
        if (postsIndexCache) return postsIndexCache;
        try {
          const res = await fetch('content/posts/index.json');
          if (!res.ok) throw new Error('HTTP ' + res.status);
          postsIndexCache = await res.json();
        } catch (e) {
          postsIndexCache = EMBEDDED_POSTS_INDEX;
        }
        return postsIndexCache;
      }

      function renderList(posts) {
        contentArea.innerHTML = '';
        const list = document.createElement('div');
        list.className = 'blog-posts';
        posts.forEach(p => {
          const article = document.createElement('article');
          article.className = 'blog-post';
          article.innerHTML = `
            <h3><a href="#post/${p.slug}" style="text-decoration:none; color:inherit;">${p.title}</a></h3>
            <div class="meta">Published on ${new Date(p.date).toLocaleDateString()} by ${p.author || 'Unknown'}</div>
            <p class="excerpt">${p.excerpt || ''}</p>
          `;
          list.appendChild(article);
        });
        contentArea.appendChild(list);
      }

      async function renderHome() {
        sectionTitle.textContent = 'Home';
        const html = await loadMarkdown('content/pages/home.md');
        contentArea.innerHTML = `<div class="markdown-body">${html}</div>`;
      }

      async function renderPage(slug, label) {
        sectionTitle.textContent = label || slug;
        const html = await loadMarkdown(`content/pages/${slug}.md`);
        contentArea.innerHTML = `<div class="markdown-body">${html}</div>`;
      }

      async function renderBlog() {
        sectionTitle.textContent = 'Latest Blog Posts';
        const posts = await loadPostsIndex();
        renderList(posts);
      }

      async function renderPost(slug) {
        const posts = await loadPostsIndex();
        const post = posts.find(p => p.slug === slug);
        if (!post) {
          sectionTitle.textContent = 'Post not found';
          contentArea.innerHTML = '<p>We could not find that post.</p>';
          return;
        }
        sectionTitle.textContent = post.title;
        const html = await loadMarkdown(post.path);
        const meta = `<div class=\"meta\" style=\"margin: 0 0 1rem 0; color:#6b7280;\">${new Date(post.date).toLocaleDateString()} ${post.author ? ' â€¢ ' + post.author : ''}</div>`;
        contentArea.innerHTML = `${meta}<div class=\"markdown-body\">${html}</div>`;
      }

      async function router() {
        setActiveNav();
        const hash = (location.hash || '#home').replace(/^#/, '');
        if (hash === 'home' || hash === '') return renderHome();
        if (hash === 'about') return renderPage('about', 'About');
        if (hash === 'contact') return renderPage('contact', 'Contact');
        if (hash === 'blog') return renderBlog();
        if (hash.startsWith('post/')) return renderPost(hash.split('/')[1]);
        return renderHome();
      }

      window.addEventListener('hashchange', router);
      window.addEventListener('DOMContentLoaded', router);
    </script>
</body>
</html>
